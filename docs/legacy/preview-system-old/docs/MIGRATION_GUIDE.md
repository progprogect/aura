# üì¶ Preview System V3 - Migration Guide

## üéØ –û–±–∑–æ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏

–ú–∏–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ø—Ä–µ–≤—å—é —Å base64 –≤ Cloudinary CDN —Å responsive images.

**–ß—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è:**
- ‚ùå –°—Ç–∞—Ä–æ–µ: `previewImage: String` (base64 data URL)
- ‚úÖ –ù–æ–≤–æ–µ: `previewUrls: Json` ({ thumbnail, card, detail, original })

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- üöÄ CDN –¥–æ—Å—Ç–∞–≤–∫–∞ (–±—ã—Å—Ç—Ä–µ–µ –≤ 10x)
- üì± Responsive images (—ç–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –¥–æ 70%)
- üñºÔ∏è WebP/AVIF —Ñ–æ—Ä–º–∞—Ç—ã (—Ä–∞–∑–º–µ—Ä –º–µ–Ω—å—à–µ –Ω–∞ 30-50%)
- ‚ôªÔ∏è –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ë–î (–±–µ–∑ base64)

---

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ SQL –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ (`20251010182008_add_preview_urls`)
- ‚úÖ –ü–æ–ª–µ `previewUrls JSONB` –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü—É `LeadMagnet`
- ‚úÖ –°—Ç–∞—Ä–æ–µ –ø–æ–ª–µ `previewImage` —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### 2. Backend
- ‚úÖ BullMQ queue –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ Worker –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚úÖ API endpoints —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ Cloudinary –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞

### 3. Frontend
- ‚úÖ `ResponsivePreview` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å srcset
- ‚úÖ `CardPreview` –æ–±–Ω–æ–≤–ª—ë–Ω –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–±–æ–∏—Ö –ø–æ–ª–µ–π
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

---

## üöÄ –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å Preview Worker

Worker –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–µ–≤—å—é –≤ —Ñ–æ–Ω–µ.

**Local Development:**
```bash
npx ts-node src/lib/queue/worker-start.ts
```

**Production (Railway):**

–î–æ–±–∞–≤–∏—Ç—å –≤ `package.json`:
```json
{
  "scripts": {
    "worker:preview": "node --loader ts-node/esm src/lib/queue/worker-start.ts"
  }
}
```

–ù–∞ Railway —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π Service:
- Type: Worker
- Start Command: `npm run worker:preview`
- Variables: —Ç–µ –∂–µ —á—Ç–æ —É –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

---

### –®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ PDF (401 errors)

–°–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç PDF —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞.

```bash
npx ts-node prisma/scripts/fix-pdf-access.ts
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ù–∞—Ö–æ–¥–∏—Ç PDF —Å 401 –æ—à–∏–±–∫–∞–º–∏
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å `resource_type: 'raw'`
- –û–±–Ω–æ–≤–ª—è–µ—Ç URLs –≤ –ë–î

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üìÑ –ù–∞–π–¥–µ–Ω–æ PDF —Ñ–∞–π–ª–æ–≤: X
‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ! –ù–æ–≤—ã–π URL: https://...
```

---

### –®–∞–≥ 3: –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ base64 –ø—Ä–µ–≤—å—é

–ü–µ—Ä–µ–Ω–æ—Å–∏—Ç base64 –ø—Ä–µ–≤—å—é –≤ Cloudinary —Å responsive —Ä–∞–∑–º–µ—Ä–∞–º–∏.

```bash
npx ts-node prisma/scripts/migrate-preview-to-cdn.ts
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –ù–∞—Ö–æ–¥–∏—Ç –ª–∏–¥-–º–∞–≥–Ω–∏—Ç—ã —Å base64 `previewImage`
2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤ Cloudinary (3 —Ä–∞–∑–º–µ—Ä–∞)
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç `previewUrls` –≤ –ë–î
4. –û—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–π `previewImage` –¥–ª—è rollback

**–ü—Ä–æ—Ü–µ—Å—Å:**
```
üìä –ù–∞–π–¥–µ–Ω–æ –ª–∏–¥-–º–∞–≥–Ω–∏—Ç–æ–≤ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏: 25

‚öôÔ∏è  –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º: –ú–æ–π PDF Guide
   üì§ –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Cloudinary...
   ‚úÖ –£—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ
      - Thumbnail: https://res.cloudinary.com/.../w_400,h_300/...
      - Card: https://res.cloudinary.com/.../w_800,h_600/...
      - Detail: https://res.cloudinary.com/.../w_1200,h_900/...

üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
   ‚úÖ –£—Å–ø–µ—à–Ω–æ: 24
   ‚è≠Ô∏è  –ü—Ä–æ–ø—É—â–µ–Ω–æ: 1
   ‚ùå –û—à–∏–±–æ–∫: 0
```

**–í–∞–∂–Ω–æ:** –°–∫—Ä–∏–ø—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É 500ms –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ (rate limiting).

---

### –®–∞–≥ 4: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–≤—å—é –¥–ª—è –Ω–æ–≤—ã—Ö –ª–∏–¥-–º–∞–≥–Ω–∏—Ç–æ–≤

–î–ª—è –ª–∏–¥-–º–∞–≥–Ω–∏—Ç–æ–≤ –±–µ–∑ –ø—Ä–µ–≤—å—é (—Å—Å—ã–ª–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å —Ä–∞–Ω–µ–µ).

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ API (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
curl -X POST http://localhost:3000/api/lead-magnet/preview/batch \
  -H "Content-Type: application/json" \
  -d '{"regenerateAll": true}'
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –í—Ä—É—á–Ω—É—é –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ**
```bash
curl -X POST http://localhost:3000/api/lead-magnet/preview/generate \
  -H "Content-Type: application/json" \
  -d '{"leadMagnetId": "clxxx..."}'
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:**
```bash
curl http://localhost:3000/api/lead-magnet/preview/status/{jobId}
```

---

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```sql
-- –°–∫–æ–ª—å–∫–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ
SELECT 
  COUNT(*) FILTER (WHERE "previewUrls" IS NOT NULL) as migrated,
  COUNT(*) FILTER (WHERE "previewImage" IS NOT NULL AND "previewUrls" IS NULL) as pending,
  COUNT(*) FILTER (WHERE "previewImage" IS NULL AND "previewUrls" IS NULL) as no_preview
FROM "LeadMagnet";
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
migrated | pending | no_preview
---------|---------|------------
   45    |    0    |     5
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ UI:**
- –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π –ø—Ä–æ—Ñ–∏–ª—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
- –ü—Ä–µ–≤—å—é –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –±—ã—Å—Ç—Ä–æ
- –í DevTools Network: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å WebP
- –†–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è mobile/desktop (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å srcset)

---

## üîÑ Rollback (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)

### –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–µ–≤—å—é

```bash
npx ts-node prisma/scripts/rollback-preview-migration.ts
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –£–¥–∞–ª—è–µ—Ç –ø—Ä–µ–≤—å—é –∏–∑ Cloudinary
2. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `previewUrls = null`
3. –û—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–π `previewImage` (backup)

### –û—Ç–∫–∞—Ç SQL –º–∏–≥—Ä–∞—Ü–∏–∏

**–ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø** (–º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Ç–µ—Ä–µ –¥–∞–Ω–Ω—ã—Ö)

```sql
-- –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
ALTER TABLE "LeadMagnet" DROP COLUMN "previewUrls";
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–∏–≥—Ä–∞—Ü–∏–∏

### –õ–æ–≥–∏ Worker

```bash
# Railway
railway logs --service preview-worker

# Local
# –°–º–æ—Ç—Ä–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—å –≥–¥–µ –∑–∞–ø—É—â–µ–Ω worker
```

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
```
[Preview Worker] ‚úÖ –ó–∞–¥–∞—á–∞ completed - —É—Å–ø–µ—Ö
[Preview Worker] ‚ùå –ó–∞–¥–∞—á–∞ failed - –æ—à–∏–±–∫–∞
```

### Redis Queue Stats

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Redis
redis-cli -u $REDIS_PUBLIC_URL

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—á–µ—Ä–µ–¥—å
LLEN bull:preview-generation:wait    # –û–∂–∏–¥–∞—é—Ç
LLEN bull:preview-generation:active  # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
LLEN bull:preview-generation:failed  # –ü—Ä–æ–≤–∞–ª–µ–Ω—ã
```

### Cloudinary Usage

Dashboard ‚Üí Media Library ‚Üí `aura/previews/`

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤
- –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä
- Bandwidth usage

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 1. –°—Ç–∞—Ä—ã–µ –ø—Ä–µ–≤—å—é –ù–ï —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ `previewImage` –æ—Å—Ç–∞—ë—Ç—Å—è –∫–∞–∫ backup.

**–£–¥–∞–ª–∏—Ç—å –≤—Ä—É—á–Ω—É—é (–ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏):**
```sql
UPDATE "LeadMagnet" 
SET "previewImage" = NULL 
WHERE "previewUrls" IS NOT NULL;
```

**–≠–∫–æ–Ω–æ–º–∏—è –º–µ—Å—Ç–∞ –≤ –ë–î:** ~50-80% –¥–ª—è –ª–∏–¥-–º–∞–≥–Ω–∏—Ç–æ–≤ —Å base64

### 2. Rate Limiting

–°–∫—Ä–∏–ø—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç –∑–∞–¥–µ—Ä–∂–∫—É –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏:
- –ú–∏–≥—Ä–∞—Ü–∏—è: 500ms –º–µ–∂–¥—É –ª–∏–¥-–º–∞–≥–Ω–∏—Ç–∞–º–∏
- Batch generation: throttling –≤ worker

**–ù–ï –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–∫—Ä–∏–ø—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ!**

### 3. Cloudinary Limits

Free –ø–ª–∞–Ω:
- 25 GB storage
- 25 GB bandwidth/month
- 100K transformations/month

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å usage –≤ Cloudinary Dashboard

### 4. Worker –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ

–ù–æ–≤—ã–µ –ª–∏–¥-–º–∞–≥–Ω–∏—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –ø—Ä–µ–≤—å—é —á–µ—Ä–µ–∑ queue.

**–ï—Å–ª–∏ worker —É–ø–∞–ª:**
- –ü—Ä–µ–≤—å—é –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è
- –ó–∞–¥–∞—á–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ queue
- –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üéØ Acceptance Criteria –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏

- ‚úÖ SQL –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ Worker –∑–∞–ø—É—â–µ–Ω –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á–∏
- ‚úÖ PDF 401 errors –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ Base64 –ø—Ä–µ–≤—å—é –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ Cloudinary
- ‚úÖ –ù–æ–≤—ã–µ –ª–∏–¥-–º–∞–≥–Ω–∏—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –ø—Ä–µ–≤—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç responsive images —Å srcset
- ‚úÖ –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π (—Å—Ç–∞—Ä—ã–µ –ø—Ä–µ–≤—å—é —Ä–∞–±–æ—Ç–∞—é—Ç)
- ‚úÖ Rollback —Å–∫—Ä–∏–ø—Ç—ã –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üÜò Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Worker –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** Redis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Redis
redis-cli -u $REDIS_PUBLIC_URL ping
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: PONG

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
echo $REDIS_PUBLIC_URL
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–µ–≤—å—é –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞ 1:** Cloudinary –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env
grep CLOUDINARY .env

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
CLOUDINARY_CLOUD_NAME="..."
CLOUDINARY_API_KEY="..."
CLOUDINARY_API_SECRET="..."
```

**–ü—Ä–∏—á–∏–Ω–∞ 2:** Worker –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ worker
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å worker
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—á–µ—Ä–µ–¥—å –≤ Redis

### –ü—Ä–æ–±–ª–µ–º–∞: PDF –≤—Å—ë –µ—â—ë 401

**–†–µ—à–µ–Ω–∏–µ:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å fix-pdf-access.ts —Å–Ω–æ–≤–∞
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `uploadPDF()` –∞ –Ω–µ `uploadDocument()`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Cloudinary Settings ‚Üí Security

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–í–æ–ø—Ä–æ—Å—ã –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `[Preview Worker]`, `[Cloudinary Storage]`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å docs: `/docs/preview-system/ARCHITECTURE.md`
- SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –≤—ã—à–µ

**–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**
- –°—Ç–∞—Ä—É—é —Å–∏—Å—Ç–µ–º—É –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ 1-2 –Ω–µ–¥–µ–ª—å —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- Cleanup –∫–æ–¥: —É–¥–∞–ª–∏—Ç—å `pdf-preview.ts`, —Å—Ç–∞—Ä—ã–π `preview-generator-universal.ts`

---

**–î–∞—Ç–∞:** 2025-10-10  
**–í–µ—Ä—Å–∏—è:** 3.0.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Ready for Production Migration

