# Legacy Preview System (Устаревшая система генерации превью)

**Дата переноса:** 2025-10-12  
**Статус:** Archived / Не используется

## Причина переноса

Старая система автоматической генерации превью была заменена на более простую и надёжную систему с кастомными превью.

### Проблемы старой системы:
- Сложная архитектура с queue (Bull/BullMQ)
- Множество провайдеров (PDF, Video, Image, Service)
- Асинхронная генерация через background jobs
- Зависимость от внешних сервисов
- Сложность отладки и поддержки

### Новая система (Custom Preview System):
- Специалист загружает своё превью (или генерируется простое fallback)
- Генерация fallback через Node.js Canvas (emoji + градиент)
- Синхронная обработка при создании лид-магнита
- Квадратные превью (1:1) на всех устройствах
- Простая архитектура без queue

## Содержимое

### `/lib/`
- `core/` - Ядро старой системы генерации (generator, types)
- `providers/` - Провайдеры для разных типов контента (PDF, Video, Image, Service)
- `storage/` - Хранилище (Cloudinary интеграция)

### `/queue/`
- `preview-queue.ts` - Bull queue для фоновой генерации
- `preview-worker.ts` - Worker для обработки задач

### `/docs/`
- Документация старой системы preview

## Миграция

Все существующие лид-магниты были мигрированы на новую систему с fallback превью.

См. `docs/lead-magnets/CUSTOM_PREVIEW.md` для документации новой системы.

## Можно ли удалить?

Эти файлы сохранены для:
1. Справки при возникновении вопросов
2. Возможности отката (если потребуется)
3. Понимания исторического контекста

**Рекомендуется удалить через 6 месяцев** после стабильной работы новой системы.

