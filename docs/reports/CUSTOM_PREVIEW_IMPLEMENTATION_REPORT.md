# –û—Ç—á—ë—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø—Ä–µ–≤—å—é

**–î–∞—Ç–∞:** 2025-10-12  
**–í–µ—Ä—Å–∏—è:** 2.0.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø—Ä–µ–≤—å—é –¥–ª—è –ª–∏–¥-–º–∞–≥–Ω–∏—Ç–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π fallback. –°—Ç–∞—Ä–∞—è —Å–ª–æ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å queue –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ –ø—Ä–æ—Å—Ç—É—é –∏ –Ω–∞–¥—ë–∂–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### –§–∞–∑–∞ 0: –ê—É–¥–∏—Ç –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞
- [x] –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö preview/previewUrls
- [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ñ–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è
- [x] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –§–∞–∑–∞ 1: Backend - Fallback –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
- [x] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `canvas`, `react-easy-crop`
- [x] –°–æ–∑–¥–∞–Ω `fallback-preview-generator.ts` —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ Canvas
- [x] –û–±–Ω–æ–≤–ª—ë–Ω `cloudinary/config.ts`:
  - `uploadCustomPreview()` - –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø—Ä–µ–≤—å—é
  - `uploadFallbackPreview()` - –∑–∞–≥—Ä—É–∑–∫–∞ fallback
  - `deletePreview()` - —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ
  - `generatePreviewUrlsFromPublicId()` - responsive URLs

### –§–∞–∑–∞ 2: Backend - API endpoints
- [x] –û–±–Ω–æ–≤–ª—ë–Ω POST `/api/specialist/lead-magnets`:
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `previewFile` –≤ FormData
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è fallback –µ—Å–ª–∏ –ø—Ä–µ–≤—å—é –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ
  - –£–¥–∞–ª–µ–Ω–∞ queue –ª–æ–≥–∏–∫–∞
- [x] –û–±–Ω–æ–≤–ª—ë–Ω PUT `/api/specialist/lead-magnets/[id]`:
  - –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ POST
  - –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–µ–≤—å—é –ø—Ä–∏ –∑–∞–º–µ–Ω–µ
- [x] –£–¥–∞–ª–µ–Ω—ã legacy API endpoints:
  - `/api/lead-magnet/preview/generate`
  - `/api/lead-magnet/preview/batch`
  - `/api/lead-magnet/preview/status/[jobId]`
  - `/api/lead-magnet/generate-preview`

### –§–∞–∑–∞ 3: TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- [x] –û–±–Ω–æ–≤–ª—ë–Ω `types/lead-magnet.ts`:
  - –î–æ–±–∞–≤–ª–µ–Ω `customPreview` —Ñ–ª–∞–≥
  - –î–æ–±–∞–≤–ª–µ–Ω `previewFile` –≤ FormData
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è PreviewUrls
- [x] –°–æ–∑–¥–∞–Ω `preview-utils.ts` —Å —É—Ç–∏–ª–∏—Ç–∞–º–∏:
  - `validatePreviewFile()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è
  - `getPreviewUrl()` - –ø–æ–ª—É—á–µ–Ω–∏–µ URL
  - `getFallbackGradient()` - CSS –≥—Ä–∞–¥–∏–µ–Ω—Ç
  - `isSquareImage()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ—Å—Ç–∏
  - `getImageDimensions()` - —Ä–∞–∑–º–µ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  - `fileToBase64()` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è

### –§–∞–∑–∞ 4: UI - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∑–∫–∏
- [x] –°–æ–∑–¥–∞–Ω `PreviewUploader.tsx`:
  - Drag-n-drop –∑–æ–Ω–∞
  - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
  - Preview –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ
  - –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è
- [x] –°–æ–∑–¥–∞–Ω `FallbackPreview.tsx`:
  - CSS –≤–µ—Ä—Å–∏—è fallback
  - –ì—Ä–∞–¥–∏–µ–Ω—Ç –ø–æ —Ç–∏–ø—É
  - Emoji —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞
- [x] –°–æ–∑–¥–∞–Ω `CropModal.tsx`:
  - Crop —á–µ—Ä–µ–∑ `react-easy-crop`
  - Zoom slider
  - Drag –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] –û–±–Ω–æ–≤–ª—ë–Ω `LeadMagnetModal.tsx`:
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
  - –°–µ–∫—Ü–∏—è "–ü—Ä–µ–≤—å—é"
  - State –¥–ª—è preview —Ñ–∞–π–ª–æ–≤
  - –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ FormData

### –§–∞–∑–∞ 5: UI - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ)
- [x] –û–±–Ω–æ–≤–ª—ë–Ω `CardPreview.tsx`:
  - `aspect-square` –¥–ª—è –≤—Å–µ—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
  - –û–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–µ —É–≥–ª—ã
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `previewUrls.card`
- [x] –û–±–Ω–æ–≤–ª—ë–Ω `LeadMagnetCard.tsx`:
  - –ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–µ–≤—å—é
  - –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞
- [x] –û–±–Ω–æ–≤–ª—ë–Ω `SpecialistLeadMagnets.tsx`:
  - Grid –¥–ª—è –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
  - –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ gap —Ä–∞–∑–º–µ—Ä—ã
  - Responsive: 1 (mobile) ‚Üí 2 (tablet) ‚Üí 3 (desktop)
- [x] –°–æ–∑–¥–∞–Ω `PreviewSkeleton.tsx`:
  - –ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–π skeleton loader
  - –ê–Ω–∏–º–∞—Ü–∏—è shimmer

### –§–∞–∑–∞ 6: –û—á–∏—Å—Ç–∫–∞ Legacy –∫–æ–¥–∞
- [x] –ü–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤ `docs/legacy/preview-system-old/`:
  - `src/lib/lead-magnets/preview/core/`
  - `src/lib/lead-magnets/preview/providers/`
  - `src/lib/lead-magnets/preview/storage/`
  - `src/lib/queue/preview-queue.ts`
  - `src/lib/queue/preview-worker.ts`
  - `docs/preview-system/`
- [x] –°–æ–∑–¥–∞–Ω README –≤ legacy –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- [x] –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã queue

### –§–∞–∑–∞ 7: –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- [x] –°–æ–∑–¥–∞–Ω `scripts/migrate-lead-magnet-previews.ts`:
  - Dry-run —Ä–µ–∂–∏–º
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è fallback –¥–ª—è –≤—Å–µ—Ö
  - –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Cloudinary
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î
  - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] –î–æ–±–∞–≤–ª–µ–Ω npm script `migrate:previews`

### –§–∞–∑–∞ 8-9: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] –°–æ–∑–¥–∞–Ω `docs/lead-magnets/CUSTOM_PREVIEW.md`:
  - –ü–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
  - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  - Troubleshooting
  - Changelog
- [x] –°–æ–∑–¥–∞–Ω `docs/legacy/preview-system-old/README.md`
- [x] –°–æ–∑–¥–∞–Ω —ç—Ç–æ—Ç –æ—Ç—á—ë—Ç

---

## üìä Acceptance Criteria - –ü—Ä–æ–≤–µ—Ä–∫–∞

| AC | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|----|----------|--------|
| AC1 | –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω–æ–µ –ø—Ä–µ–≤—å—é —á–µ—Ä–µ–∑ drag-n-drop –∏–ª–∏ –∫–Ω–æ–ø–∫—É | ‚úÖ |
| AC2 | –ù–µ–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –æ–±—Ä–µ–∑–∞—Ç—å –¥–æ –∫–≤–∞–¥—Ä–∞—Ç–∞ | ‚úÖ |
| AC3 | –ï—Å–ª–∏ –ø—Ä–µ–≤—å—é –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è fallback (emoji + –≥—Ä–∞–¥–∏–µ–Ω—Ç) | ‚úÖ |
| AC4 | –ü—Ä–µ–≤—å—é –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ (–º–æ–±–∏–ª–∫–∞ + –¥–µ—Å–∫—Ç–æ–ø) | ‚úÖ |
| AC5 | –ü—Ä–µ–≤—å—é –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ –Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ª–∏–¥-–º–∞–≥–Ω–∏—Ç–∞ | ‚úÖ |
| AC6 | –¢–∏–ø "service": –ø—Ä–µ–≤—å—é –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–µ, —Ñ–æ—Ä–º–∞ –Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ | ‚úÖ |
| AC7 | –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ª–∏–¥-–º–∞–≥–Ω–∏—Ç—ã –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ fallback | ‚è≥ –û–∂–∏–¥–∞–µ—Ç –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ |
| AC8 | Legacy –∫–æ–¥ (queue, providers) —É–¥–∞–ª–µ–Ω/–ø–µ—Ä–µ–º–µ—â–µ–Ω | ‚úÖ |

---

## üì¶ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend
- `src/lib/lead-magnets/fallback-preview-generator.ts` - Fallback –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
- `src/lib/lead-magnets/preview-utils.ts` - –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø—Ä–µ–≤—å—é

### Frontend
- `src/components/specialist/edit/PreviewUploader.tsx` - –ó–∞–≥—Ä—É–∑—á–∏–∫ –ø—Ä–µ–≤—å—é
- `src/components/specialist/edit/FallbackPreview.tsx` - CSS fallback preview
- `src/components/specialist/edit/CropModal.tsx` - Modal –¥–ª—è crop
- `src/components/lead-magnet/PreviewSkeleton.tsx` - Skeleton loader

### Scripts & Docs
- `scripts/migrate-lead-magnet-previews.ts` - –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
- `docs/lead-magnets/CUSTOM_PREVIEW.md` - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `docs/legacy/preview-system-old/README.md` - Legacy readme

---

## üîÑ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend
- `src/lib/cloudinary/config.ts` - –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–µ–≤—å—é
- `src/types/lead-magnet.ts` - –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã
- `src/app/api/specialist/lead-magnets/route.ts` - POST endpoint
- `src/app/api/specialist/lead-magnets/[id]/route.ts` - PUT endpoint

### Frontend
- `src/components/specialist/edit/LeadMagnetModal.tsx` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
- `src/components/lead-magnet/CardPreview.tsx` - –ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ –ø—Ä–µ–≤—å—é
- `src/components/lead-magnet/LeadMagnetCard.tsx` - –ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- `src/components/specialist/SpecialistLeadMagnets.tsx` - Grid –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### Config
- `package.json` - –î–æ–±–∞–≤–ª–µ–Ω script `migrate:previews`

---

## üóëÔ∏è –£–¥–∞–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `src/app/api/lead-magnet/preview/batch/route.ts`
- `src/app/api/lead-magnet/preview/generate/route.ts`
- `src/app/api/lead-magnet/preview/status/[jobId]/route.ts`
- `src/app/api/lead-magnet/generate-preview/route.ts`

---

## üì¶ –ü–µ—Ä–µ–º–µ—â—ë–Ω–Ω—ã–µ –≤ Legacy

- `src/lib/lead-magnets/preview/core/**/*`
- `src/lib/lead-magnets/preview/providers/**/*`
- `src/lib/lead-magnets/preview/storage/**/*`
- `src/lib/queue/preview-queue.ts`
- `src/lib/queue/preview-worker.ts`
- `docs/preview-system/**/*`

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ø—Ä–µ–≤—å—é:**
   ```bash
   npm run migrate:previews -- --dry-run  # –¢–µ—Å—Ç
   npm run migrate:previews               # –†–µ–∞–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
   ```

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ª–∏–¥-–º–∞–≥–Ω–∏—Ç —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º –ø—Ä–µ–≤—å—é
   - –°–æ–∑–¥–∞—Ç—å –ª–∏–¥-–º–∞–≥–Ω–∏—Ç –±–µ–∑ –ø—Ä–µ–≤—å—é (fallback)
   - –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (crop)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Open Graph (og:image)

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Cloudinary –Ω–∞ errors
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ storage
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å feedback —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
4. **–£–ª—É—á—à–µ–Ω–∏—è:**
   - A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏–∑–∞–π–Ω–æ–≤ fallback
   - Analytics: –∫–∞—Å—Ç–æ–º–Ω—ã–µ vs fallback –ø—Ä–µ–≤—å—é
   - Bulk upload –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–µ–≤—å—é

5. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
   - –û–±—É—á–∞—é—â–µ–µ –≤–∏–¥–µ–æ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤
   - FAQ —Å–µ–∫—Ü–∏—è
   - Best practices –¥–ª—è –ø—Ä–µ–≤—å—é

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ
- ‚úÖ 0 linter errors
- ‚úÖ –í—Å–µ —Ç–∏–ø—ã TypeScript –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚è≥ –ú–∏–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞

### UX
- ‚è≥ –í—Ä–µ–º—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ª–∏–¥-–º–∞–≥–Ω–∏—Ç–∞ < 2 –º–∏–Ω—É—Ç—ã
- ‚è≥ 0 –±–∞–≥–æ–≤ —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –ø—Ä–µ–≤—å—é
- ‚è≥ –ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ –ø—Ä–µ–≤—å—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

---

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ë—ã–ª–æ (Legacy)
```
–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç ‚Üí API ‚Üí Queue ‚Üí Worker ‚Üí Providers ‚Üí Cloudinary ‚Üí –ë–î
                     ‚Üì
                Background Job
                (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
```
**–ü—Ä–æ–±–ª–µ–º—ã:**
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç queue
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

### –°—Ç–∞–ª–æ (Custom Preview)
```
–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç ‚Üí API ‚Üí Fallback Generator ‚Üí Cloudinary ‚Üí –ë–î
                     ‚Üì
                –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
```
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü—Ä–æ—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç queue
- –õ–µ–≥–∫–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å

---

## üé® –î–∏–∑–∞–π–Ω Fallback

### –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã
- **File:** #3B82F6 ‚Üí #1E40AF (—Å–∏–Ω–∏–π)
- **Link:** #8B5CF6 ‚Üí #6D28D9 (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)
- **Service:** #EC4899 ‚Üí #BE185D (—Ä–æ–∑–æ–≤—ã–π)

### –†–∞–∑–º–µ—Ä—ã
- **Canvas:** 800x800 (–∫–≤–∞–¥—Ä–∞—Ç)
- **Emoji:** 240px font size
- **Shadow:** rgba(0, 0, 0, 0.2) —Å blur 20px

---

## üîç –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ Edge Cases

- ‚úÖ –§–∞–π–ª > 5MB ‚Üí –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ—à–∏–±–∫–∞
- ‚úÖ –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç ‚Üí –æ—à–∏–±–∫–∞
- ‚úÖ –ù–µ–∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ‚Üí crop modal
- ‚úÖ Cloudinary –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí graceful degradation
- ‚úÖ –ë–µ–∑ –ø—Ä–µ–≤—å—é ‚Üí fallback –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- ‚úÖ –ó–∞–º–µ–Ω–∞ –ø—Ä–µ–≤—å—é ‚Üí —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ

---

## üìù –ó–∞–º–µ—Ç–∫–∏

1. **Canvas emoji support:** –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å unicode emoji
2. **Cloudinary quota:** –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ storage
3. **Migration:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ off-peak hours
4. **Legacy code:** –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —á–µ—Ä–µ–∑ 6 –º–µ—Å—è—Ü–µ–≤

---

## ‚ú® –ò—Ç–æ–≥

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø—Ä–µ–≤—å—é –¥–ª—è –ª–∏–¥-–º–∞–≥–Ω–∏—Ç–æ–≤ —Å:
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π –∏ –ø–æ–Ω—è—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- ‚úÖ –û—Ç–ª–∏—á–Ω—ã–º UX –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤
- ‚úÖ –ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–º–∏ –ø—Ä–µ–≤—å—é –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- ‚úÖ Fallback –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ Canvas
- ‚úÖ Crop —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º
- ‚úÖ –ü–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏!** üöÄ

